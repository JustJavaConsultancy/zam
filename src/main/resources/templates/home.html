<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
    <head>
        <link th:href="@{/css/home.css}" rel="stylesheet">
    </head>
    
    <!-- Global Header with Brand and Action Buttons -->
    <div layout:fragment="header" class="global-header">
        <div class="flex justify-between items-center">
            <!-- Brand -->
            <div class="flex items-center">
                <h1 class="text-2xl font-bold text-gray-900">NASD Zam Communication</h1>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex items-center space-x-4">
                <button class="flex items-center px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 6v.75m0 0v.75m0 0v.75m0 0V6m-9 0v.75m0 0v.75m0 0v.75m0 0V6m9 3v3.75m-9-3v3.75m0 3v4.5m0-4.5v-3.75m9 7.5V9.75m-9 7.5v-3.75m9 7.5v4.5m0-4.5V6.75" />
                    </svg>
                    ZAM Meeting
                </button>
                <button class="flex items-center px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM3 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 019.374 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 00-6.374 1.766z" />
                    </svg>
                    Invite Member
                </button>
                <button class="flex items-center px-4 py-2 text-gray-600 bg-purple-100 border border-purple-300 rounded-lg hover:bg-purple-200 transition-colors">
                    <img src="@{/images/logo.svg}" alt="Logo" class="w-5 h-5 mr-2" />
                    Free
                </button>
            </div>
        </div>
    </div>
    
    <!-- Main Content Area -->
    <div layout:fragment="content" class="page-content">
        <!-- Explore Section -->
        <div class="mb-8">
            <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6">
                <!-- Left: Title with Blue Accent -->
                <div class="flex items-center space-x-4">
                    <div class="w-1 h-8 bg-blue-500 rounded-full"></div>
                    <div class="space-y-2">
                        <h2 class="text-3xl font-bold text-gray-900">Explore</h2>
                    </div>
                </div>
                
                <!-- Center: Tabs -->
                <div class="tab-container">
                    <button class="tab-button tab-active" data-tab="tab-all">All</button>
                    <button class="tab-button tab-inactive" data-tab="tab-communities">Communities</button>
                    <button class="tab-button tab-inactive" data-tab="tab-subgroups">Sub-Groups</button>
                </div>
                
                <!-- Right: Action Buttons -->
                <div class="flex items-center space-x-3">
                    <button class="flex items-center px-4 py-2 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                        </svg>
                        View Members
                    </button>
                    <button class="btn-primary-filled">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                        </svg>
                        Create New Community
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Tab Content -->
        <div class="tab-content">
            <!-- All Tab Content -->
            <div id="tab-all" class="tab-pane active">
                <!-- Community Grid -->
                <div class="community-grid">
                    <!-- Broker Dealer Community Cards -->
                    <div th:each="i : ${#numbers.sequence(1, 6)}" class="community-card broker-dealer-card">
                        <div class="flex items-start justify-between">
                            <!-- Left: Logo, Name, Members -->
                            <div class="flex items-start space-x-4">
                                <div class="community-avatar broker-dealer-avatar">
                                    <span class="text-lg font-bold text-orange-600">Z</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="community-title">Broker Dealer community</h3>
                                    <div class="community-meta">
                                        <div class="flex items-center space-x-2">
                                            <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                                            </svg>
                                            <span class="members-count">100.8K Members</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right: Data with icons, unread messages -->
                            <div class="flex flex-col items-end space-y-2">
                                <div class="flex items-center space-x-3">
                                    <div class="metric-item">
                                        <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        <span>20.6K</span>
                                    </div>
                                    <div class="metric-item">
                                        <svg class="w-4 h-4 text-orange-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                                        </svg>
                                        <span>1.5.4K</span>
                                    </div>
                                </div>
                                <div class="metric-badge">231</div>
                            </div>
                        </div>
                        
                        <!-- Action Button (Three dots) - Positioned outside card -->
                        <button class="more-options absolute top-4 right-4">
                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- ISS Sub-Group Cards -->
                    <div th:each="i : ${#numbers.sequence(1, 8)}" class="community-card iss-subgroup-card">
                        <div class="flex items-start justify-between">
                            <!-- Left: Logo, Name, Last Message -->
                            <div class="flex items-start space-x-4">
                                <div class="community-avatar iss-subgroup-avatar">
                                    <div class="avatar-cube"></div>
                                </div>
                                <div class="flex-1">
                                    <h3 class="community-title">ISS Sub-Group</h3>
                                    <div class="community-meta">
                                        <span class="admin-message">Admin: Eod report is ready...</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right: Time, Message Count -->
                            <div class="flex flex-col items-end space-y-2">
                                <div class="time-stamp">12:31pm</div>
                                <div class="metric-badge iss-badge">231</div>
                            </div>
                        </div>
                        
                        <!-- Action Button (Three dots) - Positioned outside card -->
                        <button class="more-options absolute top-4 right-4">
                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Communities Tab Content -->
            <div id="tab-communities" class="tab-pane hidden">
                <!-- Community Grid - Only Broker Dealer Cards -->
                <div class="community-grid">
                    <!-- Broker Dealer Community Cards -->
                    <div th:each="i : ${#numbers.sequence(1, 6)}" class="community-card broker-dealer-card">
                        <div class="flex items-start justify-between">
                            <!-- Left: Logo, Name, Members -->
                            <div class="flex items-start space-x-4">
                                <div class="community-avatar broker-dealer-avatar">
                                    <span class="text-lg font-bold text-orange-600">Z</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="community-title">Broker Dealer community</h3>
                                    <div class="community-meta">
                                        <div class="flex items-center space-x-2">
                                            <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                                            </svg>
                                            <span class="members-count">100.8K Members</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right: Data with icons, unread messages -->
                            <div class="flex flex-col items-end space-y-2">
                                <div class="flex items-center space-x-3">
                                    <div class="metric-item">
                                        <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        <span>20.6K</span>
                                    </div>
                                    <div class="metric-item">
                                        <svg class="w-4 h-4 text-orange-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                                        </svg>
                                        <span>1.5.4K</span>
                                    </div>
                                </div>
                                <div class="metric-badge">231</div>
                            </div>
                        </div>
                        
                        <!-- Action Button (Three dots) - Positioned outside card -->
                        <button class="more-options absolute top-4 right-4">
                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Sub-Groups Tab Content -->
            <div id="tab-subgroups" class="tab-pane hidden">
                <!-- Sub-Group Grid - Only ISS Sub-Group Cards -->
                <div class="community-grid">
                    <!-- ISS Sub-Group Cards -->
                    <div th:each="i : ${#numbers.sequence(1, 8)}" class="community-card iss-subgroup-card">
                        <div class="flex items-start justify-between">
                            <!-- Left: Logo, Name, Last Message -->
                            <div class="flex items-start space-x-4">
                                <div class="community-avatar iss-subgroup-avatar">
                                    <div class="avatar-cube"></div>
                                </div>
                                <div class="flex-1">
                                    <h3 class="community-title">ISS Sub-Group</h3>
                                    <div class="community-meta">
                                        <span class="admin-message">Admin: Eod report is ready...</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right: Time, Message Count -->
                            <div class="flex flex-col items-end space-y-2">
                                <div class="time-stamp">12:31pm</div>
                                <div class="metric-badge iss-badge">231</div>
                            </div>
                        </div>
                        
                        <!-- Action Button (Three dots) - Positioned outside card -->
                        <button class="more-options absolute top-4 right-4">
                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Empty State Content (Hidden by default, shown when no data) -->
        <div id="empty-state" class="empty-state hidden">
            <div class="flex flex-col items-center justify-center py-16 text-center">
                <!-- Empty State Illustration -->
                <div class="mb-8">
                    <img src="/images/emptystate.png" alt="Empty State" class="w-64 h-64 object-contain">
                </div>
                
                <!-- Empty State Message -->
                <div class="max-w-md">
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">All your communities, Channels and groups will appear here</h3>
                    <p class="text-gray-600 mb-8">Get started by creating your first community or joining existing ones to collaborate with your team.</p>
                    
                    <!-- Primary CTA Button -->
                    <button class="btn-primary-filled inline-flex items-center px-6 py-3 rounded-lg font-medium transition-colors shadow-lg hover:shadow-xl">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                        </svg>
                        Create New Community
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tab Functionality Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, setting up tabs...');
            
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabPanes = document.querySelectorAll('.tab-pane');
            
            console.log('Found tab buttons:', tabButtons.length);
            console.log('Found tab panes:', tabPanes.length);
            
            // Tab switching functionality
            tabButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Tab clicked:', this.getAttribute('data-tab'));
                    
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and buttons
                    tabPanes.forEach(pane => {
                        pane.classList.remove('active');
                        pane.classList.add('hidden');
                    });
                    
                    tabButtons.forEach(btn => {
                        btn.classList.remove('tab-active');
                        btn.classList.add('tab-inactive');
                    });
                    
                    // Add active class to target tab and button
                    const targetPane = document.getElementById(targetTab);
                    if (targetPane) {
                        targetPane.classList.remove('hidden');
                        targetPane.classList.add('active');
                        console.log('Activated tab:', targetTab);
                    } else {
                        console.error('Target tab not found:', targetTab);
                    }
                    
                    this.classList.remove('tab-inactive');
                    this.classList.add('tab-active');
                });
            });
            
            // Set initial active tab
            const firstTab = document.querySelector('.tab-button');
            if (firstTab) {
                firstTab.click();
            }
        });
        
        // Functions for showing/hiding empty state (for future API integration)
        function showEmptyState() {
            document.getElementById('empty-state').classList.remove('hidden');
            document.querySelector('.tab-content').classList.add('hidden');
        }
        
        function hideEmptyState() {
            document.getElementById('empty-state').classList.add('hidden');
            document.querySelector('.tab-content').classList.remove('hidden');
        }
    </script>
</html>
